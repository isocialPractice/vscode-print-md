<!DOCTYPE html>
  <html>
  <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>escapeHtml</title>
   <style>
    @page {
     size: Letter;
     margin: 0.75in;
    }

    /* Page simulation for preview */
    @media screen {
     body {
      background: #525252;
      padding: 20px;
     }

     .page-container {
      background: white;
      width: 8.5in;
      margin: 0 auto;
      padding: 0.75in;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      box-sizing: border-box;
      position: relative;
     }

     .page-break-indicator {
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      background: red;
      z-index: 100;
      pointer-events: none;
     }

     .page-break-indicator::before {
      content: 'Page ' attr(data-page) ' Break (est.)';
      position: absolute;
      right: 10px;
      top: -20px;
      background: red;
      color: white;
      padding: 2px 8px;
      font-size: 10px;
      border-radius: 3px;
      font-weight: bold;
     }
    }

    /* Print styles */
    @media print {
     body {
      background: white;
      padding: 0;
     }

     .page-container {
      width: auto;
      margin: 0;
      padding: 0;
      box-shadow: none;
     }

     .page-break-indicator {
      display: none !important;
     }
    }

    body {
     font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
     font-size: 11pt;
     line-height: 1.6;
     color: #24292f;
     margin: 0;
    }

    .content {
     max-width: 100%;
    }

    /* Headers */
    h1, h2, h3, h4, h5, h6 {
     margin-top: 1.5em;
     margin-bottom: 0.5em;
     font-weight: 600;
     line-height: 1.25;
     page-break-after: avoid;
    }

    h1 { font-size: 20pt; border-bottom: 1px solid #d0d7de; padding-bottom: 0.3em; }
    h2 { font-size: 16pt; border-bottom: 1px solid #d0d7de; padding-bottom: 0.3em; }
    h3 { font-size: 14pt; }
    h4 { font-size: 12pt; }

    /* Code blocks */
    code {
     font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
     font-size: 10pt;
     background-color: rgba(175, 184, 193, 0.2);
     padding: 0.2em 0.4em;
     border-radius: 3px;
    }

    pre {
     font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
     font-size: 10pt;
     background-color: #f6f8fa;
     border-radius: 6px;
     padding: 1em;
     overflow-x: auto;
    }

    pre code {
     background-color: transparent;
     padding: 0;
    }

    /* Lists */
    ul, ol {
     padding-left: 2em;
     margin: 0.5em 0;
    }

    li {
     margin: 0.25em 0;
    }

    /* Tables */
    table {
     border-collapse: collapse;
     width: 100%;
     margin: 1em 0;
    }

    th, td {
     border: 1px solid #d0d7de;
     padding: 0.4em 0.8em;
     text-align: left;
    }

    th {
     background-color: #f6f8fa;
     font-weight: 600;
    }

    /* Links */
    a {
     color: #0969da;
     text-decoration: none;
    }

    a:hover {
     text-decoration: underline;
    }

    /* Blockquotes */
    blockquote {
     border-left: 4px solid #d0d7de;
     padding-left: 1em;
     margin-left: 0;
     color: #57606a;
    }

    /* Images */
    img {
     max-width: 100%;
     height: auto;
    }

    /* Horizontal rules */
    hr {
     border: none;
     border-top: 1px solid #d0d7de;
     margin: 1.5em 0;
    }

    /* Avoid page breaks after headers */
    h1, h2, h3, h4, h5, h6 {
     page-break-after: avoid;
    }

    @media print {
     .page-break-indicator {
      display: none !important;
     }
    }
   </style>
  </head>
  <body>
  <div id="content-wrapper">
  <div class="page-container">
  <div class="content">
  bodyHtml
  </div>
  </div>
  </div>
  <script>
  // Add page break indicators for letter-sized pages (8.5" x 11")
  function addPageBreakIndicators() {
   const wrapper = document.getElementById('content-wrapper');
   const container = wrapper.querySelector('.page-container');

   if (!container) {
    return;
   }

   // Available content height per page: 11in - (0.75in top + 0.75in bottom margins) = 9.5in
   const pageHeight = 9.5 * 96; // 9.5 inches in pixels (96 DPI)

   // Get the total content height
   const content = container.querySelector('.content');
   const totalHeight = content.scrollHeight;

   // Calculate how many page breaks we need
   const numPages = Math.ceil(totalHeight / pageHeight);

   // Add red line indicators at each page break position   
   var pageBreakMarginTop = 60;
   var topMarIncrementer =  96;
   var topMarIncrementCount = 0;
   // Inline support function
   let nextPageMargin = (cur, marTop, idx) => {
    topMarIncrementCount++;
    cur.style.marginTop = marTop + 'px';
    if (idx > 0) pageBreakMarginTop -= topMarIncrementer; // starts at 96
    // decrease to account for new margins of pages for better est.
    if (idx >= 2) {
      if (topMarIncrementCount >= 5) {
        topMarIncrementCount = 0;
        topMarIncrementer -= 56;
        if (pageBreakMarginTop <= -240) {
          pageBreakMarginTop = 0;
          topMarIncrementer = 40;
        }
      }
    }
   };
   for (let i = 0; i < numPages; i++) {
    const breakPosition = i * pageHeight;
    const indicator = document.createElement('div');
    indicator.className = 'page-break-indicator';
    indicator.style.top = breakPosition + 'px';

    // account for new page margin or additional from code blocks
    indicator.setAttribute('data-page', String(i));
    indicator.style.setProperty('--page-number', String(i + 1));
    nextPageMargin(indicator, pageBreakMarginTop, i);
    // add page break estimate
    if (i != 0) container.appendChild(indicator);
   }
  }

  // Run when content is ready
  if (document.readyState === 'loading') {
   document.addEventListener('DOMContentLoaded', () => {
    setTimeout(addPageBreakIndicators, 100);
   });
  } else {
   setTimeout(addPageBreakIndicators, 100);
  }
  </script>
  </body>
  </html>